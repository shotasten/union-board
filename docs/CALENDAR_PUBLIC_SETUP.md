# Googleカレンダー公開設定手順

## 📋 概要

アプリで管理しているイベントカレンダーを、メンバーが自分のGoogleカレンダーに追加できるようにするための設定手順です。

---

## ⚠️ 重要: 実施前の確認

この設定により、**リンクを知っている人であれば誰でもカレンダーを閲覧できる**ようになります。

- ✅ メンバーがリンクを共有しやすい
- ✅ 検索エンジンには表示されない
- ⚠️ リンクが外部に漏れた場合、誰でも閲覧可能

**機密性の高いイベント情報がある場合は、この設定を行わないでください。**

---

## 🔧 設定手順

### 1. Googleカレンダーを開く

1. ブラウザで https://calendar.google.com/ にアクセス
2. GASスクリプトを実行しているGoogleアカウントでログイン

### 2. 対象カレンダーを探す

1. 左側のサイドバーで「他のカレンダー」セクションを探す
2. **「Tokyo Music Union イベントカレンダー」** を探す

![カレンダー一覧](※カレンダー名が表示されているはずです)

> **カレンダーが見つからない場合**:
> - GASの `setupBandCalendar()` 関数を実行してカレンダーを作成してください
> - または、Configシートの `CALENDAR_ID` を確認してください

### 3. カレンダーの設定を開く

1. 「Tokyo Music Union イベントカレンダー」にマウスを合わせる
2. 右側に表示される **「︙」（縦三点リーダー）** をクリック
3. **「設定と共有」** を選択

![設定メニュー](※設定メニューが表示されます)

### 4. アクセス権限を設定

1. 「設定と共有」画面で、下にスクロール
2. **「アクセス権限」** セクションを探す
3. 以下のいずれかを選択:

#### オプションA: 共有リンク方式（推奨）⭐

**この方法が最も簡単で安全です**

1. **「一般公開して誰でも利用できるようにする」のチェックは外したまま**にします
2. 権限レベルを確認:
   - ドロップダウンで **「予定の詳細を閲覧」** を選択
3. **「共有可能なリンクを取得」** ボタンをクリック
4. 表示されたリンクをコピー（このリンクを知っている人のみがアクセス可能）

**メリット**:
- ✅ リンクを知っている人のみがアクセス可能
- ✅ 検索エンジンには表示されない
- ✅ 設定が簡単

#### オプションB: 完全公開（非推奨）

- ☑️ **「一般公開して誰でも利用できるようにする」** にチェック
- 権限: **「予定の表示（時間枠のみ、詳細は非表示）」** または **「予定の詳細を閲覧」**

> **警告**: この設定では、検索エンジンでカレンダーが見つかる可能性があります。

#### オプションC: 特定のユーザーとのみ共有

- ☑️ **「特定のユーザーとのみ共有する」** にチェック
- 各ユーザーのメールアドレスを追加して共有

> **注意**: この方法は、メンバーごとに個別に共有設定が必要です。

### 5. 権限レベルを確認

「アクセス権限」で以下を確認:
- **「予定の詳細を閲覧」** が選択されていることを確認
- これにより、イベント名、場所、説明が共有されます

### 6. 設定を保存

- 画面上部の **「完了」** または **「保存」** をクリック（表示される場合）
- 設定は自動的に保存されます

---

## ✅ 設定確認方法

### 方法1: カレンダーIDを確認

1. 「設定と共有」画面で下にスクロール
2. **「カレンダーの統合」** セクションを探す
3. **「カレンダーID」** が表示されています
   - 例: `xxx@group.calendar.google.com`
4. このIDをメモしてください（アプリで使用します）

### 方法2: 共有リンクをテスト

1. 「共有可能なリンクを取得」ボタンで取得したリンクをコピー
2. 別のブラウザ（またはシークレットモード）を開く
3. コピーしたリンクにアクセス
4. カレンダーが表示されればOK

または、カレンダーIDを使って直接テスト:
```
https://calendar.google.com/calendar/embed?src=カレンダーID
```

---

## 🔄 設定の取り消し方法

カレンダーを非公開に戻す場合:

1. 「設定と共有」画面を開く
2. 「アクセス権限」セクションで
3. ☑️ **「特定のユーザーとのみ共有する」** にチェック
4. これで、指定したユーザーのみが閲覧可能になります

---

## 📊 公開レベルの比較

| 設定方法 | 閲覧可能な人 | 検索 | 推奨度 |
|---------|------------|------|--------|
| 共有リンク方式 | リンクを知っている人 | 不可 | ⭐⭐⭐ 推奨 |
| 特定のユーザーのみ | 指定したユーザーのみ | 不可 | ⭐⭐ |
| 一般公開 | 誰でも | 可能 | ⚠️ 非推奨 |

**推奨**: 共有リンク方式（オプションA）
- 「一般公開」のチェックは外す
- 「共有可能なリンクを取得」でリンクを取得
- そのリンクをメンバーに共有

---

## ❓ トラブルシューティング

### カレンダーが見つからない

**原因**: カレンダーが作成されていない、または別のアカウントで作成されている

**対処法**:
1. GASエディタで `setupBandCalendar()` 関数を実行
2. ログを確認してカレンダーIDを取得
3. Configシートの `CALENDAR_ID` を確認

### 設定が反映されない

**原因**: 設定の反映に時間がかかる場合がある

**対処法**:
1. 数分待ってから再度確認
2. ブラウザのキャッシュをクリア
3. 別のブラウザで確認

### 「アクセス権限」が見つからない

**原因**: カレンダーの所有者でない可能性がある

**対処法**:
1. カレンダーを作成したGoogleアカウントでログイン
2. GASスクリプトの実行アカウントを確認

---

## 📝 次のステップ

### 設定が完了したら:

1. ✅ **カレンダーIDを確認・メモ**
   - 「設定と共有」画面の「カレンダーの統合」セクション
   - カレンダーID: `xxx@group.calendar.google.com`

2. ✅ **共有リンクを取得**（オプションAの場合）
   - 「共有可能なリンクを取得」ボタンでリンクを取得
   - このリンクはアプリの「カレンダーに追加」ボタンで使用されます

3. ✅ **アプリで「カレンダーに追加」ボタンをテスト**
   - ヘッダーの「📅」ボタンをクリック
   - 「Googleカレンダーに追加」ボタンでカレンダーが追加されることを確認

### 重要な注意点

**「一般公開して誰でも利用できるようにする」のチェックは外したまま**にしてください。

- チェックを外す = リンクを知っている人のみがアクセス可能
- チェックを入れる = 誰でも検索で見つけられる（非推奨）

設定完了後、アプリに「カレンダーに追加」ボタンが表示されます。

